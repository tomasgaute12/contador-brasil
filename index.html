<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contador Brasil</title>
  <meta name="description" content="Contador en hora de Brasil + galerÃ­a + comentarios" />

  <style>
    :root { color-scheme: dark; }
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 600px at 20% 10%, #2dd4bf33, transparent),
        radial-gradient(900px 500px at 80% 30%, #60a5fa33, transparent),
        #0b1020;
      color: #e8eefc;
      padding: 20px 0;
    }

    .wrap { width: min(900px, calc(100% - 32px)); display: grid; gap: 14px; }

    .card {
      padding: 26px;
      border-radius: 20px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: 0 18px 60px rgba(0,0,0,0.35);
      backdrop-filter: blur(10px);
    }

    h1 { margin: 0 0 6px; font-size: clamp(24px, 4vw, 34px); }
    .sub { margin: 0 0 16px; opacity: .85; line-height: 1.35; }

    .row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin: 14px 0 10px;
    }

    .box {
      padding: 16px 14px;
      border-radius: 16px;
      background: rgba(0,0,0,0.22);
      border: 1px solid rgba(255,255,255,0.10);
      text-align: center;
    }

    .num { font-size: clamp(26px, 6vw, 46px); font-weight: 800; }
    .lbl { opacity: .8; font-size: 12px; letter-spacing: .12em; text-transform: uppercase; }

    .footer {
      margin-top: 12px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
      opacity: .85;
      font-size: 13px;
    }

    .tag {
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
    }

    /* GalerÃ­a */
    .gallery {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .ph {
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
    }
    .ph img { width: 100%; height: 180px; object-fit: cover; display: block; }
    .cap { padding: 10px 12px; opacity: .9; font-size: 13px; }

    /* Comentarios */
    .comments {
      display: grid;
      gap: 10px;
    }
    .fieldrow {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    input, textarea, button {
      font: inherit;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.25);
      color: #e8eefc;
      padding: 12px 12px;
      outline: none;
    }
    textarea { min-height: 90px; resize: vertical; }
    button {
      cursor: pointer;
      font-weight: 700;
      background: rgba(255,255,255,0.10);
    }
    button:hover { background: rgba(255,255,255,0.14); }

    .list {
      display: grid;
      gap: 10px;
      margin-top: 8px;
    }
    .item {
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
    }
    .meta { opacity: .75; font-size: 12px; margin-bottom: 6px; display:flex; gap:8px; flex-wrap:wrap; }
    .name { font-weight: 800; opacity: .95; }
    .actions { margin-top: 8px; display:flex; gap:8px; }
    .small { padding: 8px 10px; border-radius: 12px; font-size: 13px; }

    @media (max-width: 720px) { .gallery { grid-template-columns: 1fr; } .ph img { height: 210px; } }
    @media (max-width: 520px) { .row { grid-template-columns: repeat(2, 1fr); } .fieldrow { grid-template-columns: 1fr; } }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- CONTADOR -->
    <main class="card">
      <h1 id="title">Faltanâ€¦ ðŸ‡§ðŸ‡·</h1>
      <p class="sub" id="desc">Contador en hora de Brasil (SÃ£o Paulo) hacia el <b>2 de enero</b>.</p>

      <section class="row" aria-label="contador">
        <div class="box"><div class="num" id="d">0</div><div class="lbl">DÃ­as</div></div>
        <div class="box"><div class="num" id="h">00</div><div class="lbl">Horas</div></div>
        <div class="box"><div class="num" id="m">00</div><div class="lbl">Minutos</div></div>
        <div class="box"><div class="num" id="s">00</div><div class="lbl">Segundos</div></div>
      </section>

      <div class="footer">
        <span class="tag" id="targetTxt">ðŸŽ¯ Objetivo (BR): â€”</span>
        <span class="tag" id="nowTxt">ðŸ•’ Ahora (BR): â€”</span>
      </div>
    </main>

    <!-- IMÃGENES -->
    <section class="card">
      <h1 style="margin-bottom:10px;">Brasil en 3 postales</h1>
      <p class="sub" style="margin-bottom:12px;">PodÃ©s cambiar las URLs por las fotos que quieras.</p>

      <div class="gallery">
        <div class="ph">
          <img alt="Cristo Redentor" src="https://upload.wikimedia.org/wikipedia/commons/6/6a/Cristo_Redentor_-_Rio_de_Janeiro%2C_Brasil.jpg">
          <div class="cap">Rio de Janeiro â€” Cristo Redentor</div>
        </div>
        <div class="ph">
          <img alt="Cataratas del IguazÃº" src="https://upload.wikimedia.org/wikipedia/commons/4/40/Iguazu_Falls_2.jpg">
          <div class="cap">Foz do IguaÃ§u â€” Cataratas</div>
        </div>
        <div class="ph">
          <img alt="Pelourinho, Salvador" src="https://upload.wikimedia.org/wikipedia/commons/6/6c/Pelourinho_Salvador_Bahia_Brazil.jpg">
          <div class="cap">Salvador â€” Pelourinho</div>
        </div>
      </div>
    </section>

    <!-- COMENTARIOS (LOCAL, sin backend) -->
    <section class="card comments">
      <h1 style="margin-bottom:6px;">Comentarios</h1>
      <p class="sub" style="margin-bottom:6px;">
        Esto guarda comentarios en tu navegador (no son pÃºblicos). Si querÃ©s comentarios pÃºblicos, abajo te dejo opciÃ³n Giscus.
      </p>

      <div class="fieldrow">
        <input id="name" maxlength="40" placeholder="Tu nombre" />
        <input id="city" maxlength="40" placeholder="Ciudad (opcional)" />
      </div>
      <textarea id="text" maxlength="500" placeholder="EscribÃ­ tu comentarioâ€¦"></textarea>

      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button id="add">Publicar</button>
        <button id="clear" class="small">Borrar todos (local)</button>
      </div>

      <div class="list" id="list"></div>
    </section>
  </div>

  <script>
    // =========================
    // CONTADOR: 2 de enero 2026 (Brasil -03:00)
    // =========================
    const TIMEZONE = "America/Sao_Paulo";

    // CambiÃ¡ la hora si querÃ©s (ej 21:00:00-03:00)
    const TARGET_ISO_BR = "2026-01-02T00:00:00-03:00";

    const titleEl = document.getElementById("title");
    const targetTxt = document.getElementById("targetTxt");
    const nowTxt = document.getElementById("nowTxt");

    const pad2 = (n) => String(n).padStart(2, "0");

    function formatInBrazil(date) {
      return new Intl.DateTimeFormat("es-AR", {
        timeZone: TIMEZONE,
        weekday: "short",
        year: "numeric",
        month: "short",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
      }).format(date);
    }

    const targetDate = new Date(TARGET_ISO_BR);
    targetTxt.textContent = "ðŸŽ¯ Objetivo (BR): " + formatInBrazil(targetDate);

    function tick() {
      const now = new Date();
      nowTxt.textContent = "ðŸ•’ Ahora (BR): " + formatInBrazil(now);

      const diff = targetDate - now;

      if (diff <= 0) {
        titleEl.textContent = "Â¡Feliz 2 de enero! ðŸŽ‰ðŸ‡§ðŸ‡·";
        document.getElementById("d").textContent = "0";
        document.getElementById("h").textContent = "00";
        document.getElementById("m").textContent = "00";
        document.getElementById("s").textContent = "00";
        return;
      }

      const totalSeconds = Math.floor(diff / 1000);
      const days = Math.floor(totalSeconds / 86400);
      const hours = Math.floor((totalSeconds % 86400) / 3600);
      const minutes = Math.floor((totalSeconds % 3600) / 60);
      const seconds = totalSeconds % 60;

      titleEl.textContent = `Faltan ${days} dÃ­as ðŸ‡§ðŸ‡·`;
      document.getElementById("d").textContent = String(days);
      document.getElementById("h").textContent = pad2(hours);
      document.getElementById("m").textContent = pad2(minutes);
      document.getElementById("s").textContent = pad2(seconds);
    }

    tick();
    setInterval(tick, 1000);

    // =========================
    // COMENTARIOS (LocalStorage)
    // =========================
    const KEY = "br_countdown_comments_v1";
    const nameEl = document.getElementById("name");
    const cityEl = document.getElementById("city");
    const textEl = document.getElementById("text");
    const listEl = document.getElementById("list");

    function loadComments() {
      try { return JSON.parse(localStorage.getItem(KEY) || "[]"); }
      catch { return []; }
    }

    function saveComments(items) {
      localStorage.setItem(KEY, JSON.stringify(items));
    }

    function render() {
      const items = loadComments();
      if (!items.length) {
        listEl.innerHTML = `<div class="item" style="opacity:.8;">TodavÃ­a no hay comentarios.</div>`;
        return;
      }

      listEl.innerHTML = items
        .slice().reverse()
        .map((c, idxFromEnd) => {
          const idx = items.length - 1 - idxFromEnd;
          const meta = `${c.name}${c.city ? " Â· " + c.city : ""} Â· ${new Date(c.at).toLocaleString("es-AR")}`;
          return `
            <div class="item">
              <div class="meta"><span class="name">${escapeHtml(c.name)}</span><span>${escapeHtml(c.city || "")}</span><span>${escapeHtml(new Date(c.at).toLocaleString("es-AR"))}</span></div>
              <div>${escapeHtml(c.text)}</div>
              <div class="actions">
                <button class="small" onclick="deleteComment(${idx})">Eliminar</button>
              </div>
            </div>
          `;
        })
        .join("");
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    window.deleteComment = function(i) {
      const items = loadComments();
      items.splice(i, 1);
      saveComments(items);
      render();
    };

    document.getElementById("add").addEventListener("click", () => {
      const name = (nameEl.value || "").trim() || "AnÃ³nimo";
      const city = (cityEl.value || "").trim();
      const text = (textEl.value || "").trim();

      if (!text) return;

      const items = loadComments();
      items.push({ name, city, text, at: Date.now() });
      saveComments(items);

      textEl.value = "";
      render();
    });

    document.getElementById("clear").addEventListener("click", () => {
      localStorage.removeItem(KEY);
      render();
    });

    render();
  </script>
</body>
</html>
